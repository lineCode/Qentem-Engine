<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script src="JQen.js"></script>
    <title>JQen WASM example</title>
</head>

<body>
    <div id="maindiv">
        <fieldset>
            <legend>Template:</legend>
            <textarea id="template_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <fieldset>
            <legend>JSON:</legend>
            <textarea id="json_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <br>

        <fieldset>
            <legend>Result:</legend>
            <textarea id="rendered_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <br>
        <br>

        <button id="render">Render Template</button>
    </div>

    <script type='text/javascript'>
        window.onload = function () {
            var JQen = Module.cwrap('qentem_render_template', 'string', ['string', 'string', 'bool']),
                rt = document.getElementById("rendered_txt"),
                tt = document.getElementById("template_txt"),
                jt = document.getElementById("json_txt");

            document.getElementById("template_txt").value = window.atob('PCEtLS0gVmFyaWFibGVzIC0tPgo8ZGl2Pnt2OnZhcjJ9PC9kaXY+CjxkaXY+e3Y6YWJjW0EtWl19PC9kaXY+CjxkaXY+e3Y6YWJjMVszXX08L2Rpdj4KPGRpdj57djphYmNbQV19PC9kaXY+CjxkaXY+e3Y6bXVsdGlbYXJyMV1bRV1bMF19e3Y6bXVsdGlbYXJyMV1bRV1bMV19PC9kaXY+CjxkaXY+RG9lcyBub3QgZXhpc3Q6IHt2OmFiYzFbMTIzNDU2Nzg5MF19PC9kaXY+CjxkaXY+RW1wdHkgdmFyOiB7djplbXB0eX08L2Rpdj4KPGRpdj57bWF0aDp7djptYXRofX08L2Rpdj4KCjwhLS0tIFNpbXBsZSBpbmxpbmUgY29uZGl0aW9uIC0tPgo8ZGl2PntpaWYgY2FzZT0ie3Y6dmFyMn0gPSAyIiB0cnVlPSIyID09IDIiIGZhbHNlPSIyICE9IDEifTwvZGl2PgoKPCEtLS0gSW5saW5lIGNvbmRpdGlvbiB3aXRoIG9uZSBvcHRpb24gLS0+CjxkaXY+e2lpZiBjYXNlPSJ7djp2YXI0fSA9IDQiIHRydWU9IjQgPT0gNCJ9PC9kaXY+Cgo8IS0tLSBJbmxpbmUgY29uZGl0aW9uIHdpdGggYSByZXN1YWx0IG9mIGEgbWF0aCB2YWx1ZSBvZiBhIHZhcmlhYmxlIGluIGFuIEFycmF5IC0tPgo8ZGl2PntpaWYgY2FzZT0iKHt2Om51bWJlcnNbMl19ICsgMykgPSA1IiB0cnVlPSJlcSA1IiBmYWxzZT0iKHt2Om51bWJlcnNbMl19ICsgMykgIT0gNSJ9PC9kaXY+Cgo8IS0tLSBJbmxpbmUgY29uZGl0aW9uIHdpdGggbWF0aCAtLT4KPGRpdj57aWlmIGNhc2U9IjE0ID09IDE0IiB0cnVlPSJlcSAxNCIgZmFsc2U9IjE0ICE9IDE0In08L2Rpdj4KCjwhLS0tCk5vdGU6IGlubGluZSBpZiBjYW4gaGF2ZSBlaXRoZXIgdHJ1ZT0iLi4uIiBvciBmYWxzZT0iLi4uIjsgYm90aCBvZiB0aGVtIGlzIG5vdCByZXF1aXJlZC4KLS0+Cgo8IS0tLSBJZiBjb25kaXRpb25zIC0tPgo8ZGl2PgogICAgPGlmIGNhc2U9Int2OnZhcjJ9ID0gMiI+CiAgICAgICAgPHNwYW4+e3Y6dmFyMn08L3NwYW4+CiAgICA8L2lmPgoKICAgIDxpZiBjYXNlPSJ7djp2YXIxfSA9IDEiPgogICAgICAgIDxzcGFuPnt2OnZhcjF9PC9zcGFuPgogICAgICAgIDxpZiBjYXNlPSJ7djp2YXIyfSA9IDIiPgogICAgICAgICAgICA8c3Bhbj57djp2YXIyfTwvc3Bhbj4KICAgICAgICA8L2lmPgogICAgPC9pZj4KCiAgICA8aWYgY2FzZT0ie3Y6dmFyMX0gPSAxMSI+CiAgICAgICAgPHNwYW4+e3Y6dmFyMX08L3NwYW4+CiAgICA8ZWxzZWlmIGNhc2U9Int2OnZhcjJ9ID0gMjIiIC8+CiAgICAgICAgPHNwYW4+e3Y6dmFyMn08L3NwYW4+CiAgICA8ZWxzZWlmIGNhc2U9IiB7djplbmdpbmV9ID0gUWVudGVtICIgLz4KICAgICAgICA8c3Bhbj57djplbmdpbmV9PC9zcGFuPgogICAgPC9pZj4KCiAgICA8aWYgY2FzZT0ie3Y6dmFyMX0gPSAxMSI+CiAgICAgICAgPHNwYW4+e3Y6dmFyMX08L3NwYW4+CiAgICA8ZWxzZSAvPgogICAgICAgIDxzcGFuPnt2OnZhcjR9PC9zcGFuPgogICAgPC9pZj4KPC9kaXY+Cgo8IS0tLSBsb29wcwogICAgInNldCI6IGlzIHRoZSBuYW1lIG9mIHRoZSBBcnJheSAoY29sbG9jYXRpb24pLgogICAgInZhbHVlIjogZm9yIHRoZSB2YWx1ZSBvZiB0aGUgY3VycmVudCBpdGVtLgogICAgImtleSI6IGZvciB0aGUgaWQgb2YgdGhlIGN1cnJlbnQgaXRlbS4gTnVtYmVycyB3aWxsIGJlIHVzZWQgZm9yIG9yZGVyZCBpdGVtcy4KLS0+CjxkaXY+CiAgICA8bG9vcCBzZXQ9ImFiYzEiIHZhbHVlPSJsb29wLTEiIGtleT0iSUQiPgogICAgICAgIDxkaXY+SUQ6IGxvb3AtMTwvZGl2PgogICAgPC9sb29wPgoKICAgIDxsb29wIHNldD0iYWJjMiIgdmFsdWU9Imxvb3AtMiIga2V5PSJJRDIiPgogICAgICAgIDxkaXY+SUQyOiBsb29wLTI8L2Rpdj4KICAgIDwvbG9vcD4KPC9kaXY+Cgo8IS0tLSBOZXN0ZWQgbG9vcHMgLS0+CjxkaXY+CiAgICA8bG9vcCBzZXQ9Im11bHRpW2FycjFdW0VdIiB2YWx1ZT0ibG9vcDEiIGtleT0iSUQiPgogICAgICAgIDxzcGFuPklEOiBsb29wMTwvc3Bhbj4KCiAgICAgICAgPGxvb3Agc2V0PSJtdWx0aVthcnIxXVtFXSIgdmFsdWU9Imxvb3AyIiBrZXk9IklEMiI+CiAgICAgICAgICAgIDxzcGFuPklEMjogbG9vcDI8L3NwYW4+CiAgICAgICAgPC9sb29wPgoKICAgICAgICA8bG9vcCBzZXQ9Im11bHRpW2FycjFdW0VdIiB2YWx1ZT0ibG9vcDMiIGtleT0iSUQzIj4KICAgICAgICAgICAgPHNwYW4+SUQzOiBsb29wMzwvc3Bhbj4KCiAgICAgICAgPC9sb29wPgoKICAgIDwvbG9vcD4KPC9kaXY+Cgo8IS0tLQpOb3RlOiBsb29wcyBrZXk9Ii4uLiIgaXMgb3B0aW9uYWwuCi0tPgo=');
            document.getElementById("json_txt").value = window.atob('ewogICAgInciOiAiclxcXFwiLAogICAgInZhcjEiOiAiXCIxXCIiLAogICAgIlBQIjogImdnIiwKICAgICJudSI6IG51bGwsCiAgICAiYm9vbCI6IGZhbHNlLAogICAgImJvb2wyIjogdHJ1ZSwKICAgICImJiI6IDEwMDAsCiAgICAidmFyMiI6ICIyIiwKICAgICJ2YXIzIjogIjMiLAogICAgInZhcjQiOiAiNCIsCiAgICAidmFyNSI6ICI1IiwKICAgICJudW0zNCI6IFsKICAgICAgICAiMyIsCiAgICAgICAgIjQiCiAgICBdLAogICAgInZhcl9zdHJpbmciOiAiaW1hZ2UiLAogICAgImVuZ2luZSI6ICJRZW50ZW0iLAogICAgImFiYzEiOiBbCiAgICAgICAgIkIiLAogICAgICAgICJDIiwKICAgICAgICAiRCIsCiAgICAgICAgIkEiCiAgICBdLAogICAgImFiYzIiOiBbCiAgICAgICAgIkUiLAogICAgICAgICJGIiwKICAgICAgICAiQSIKICAgIF0sCiAgICAibnVtYmVycyI6IFsKICAgICAgICAwLAogICAgICAgIDEsCiAgICAgICAgMiwKICAgICAgICAzLAogICAgICAgIDQsCiAgICAgICAgNQogICAgXSwKICAgICJlbXB0eSI6ICIiLAogICAgIm1hdGgiOiAiKCgyKiAoMSAqIDMpKSArIDEgLSA0KSArICgoKDEwIC0gNSkgLSA2ICsgKCgxICsgMSkgKyAoMSArIDEpKSkgKiAoOCAvIDQgKyAxKSkgLSAoMSkgLSAoLTEpICsgMiIsCiAgICAiYWJjIjogewogICAgICAgICJCIjogImIiLAogICAgICAgICJAQCI6IDEwMCwKICAgICAgICAiQSI6ICJhIiwKICAgICAgICAiQyI6ICJjIiwKICAgICAgICAiRCI6ICJkIiwKICAgICAgICAiRSI6IFsKICAgICAgICAgICAgIk8iLAogICAgICAgICAgICAiSyEiCiAgICAgICAgXSwKICAgICAgICAiQS1aIjogIkFCQ0RFRkdISUdLTE1OT0JRUlNULi4uLi4iCiAgICB9LAogICAgIm11bHRpIjogewogICAgICAgICJhcnIxIjogewogICAgICAgICAgICAiRSI6IFsKICAgICAgICAgICAgICAgICJPIiwKICAgICAgICAgICAgICAgICJLISIKICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgImFycjIiOiBbCiAgICAgICAgICAgICJCIiwKICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAiRCIsCiAgICAgICAgICAgICJBIgogICAgICAgIF0sCiAgICAgICAgIkMiOiAiY29vbCIKICAgIH0KfQo=');

            document.getElementById("render").addEventListener('click', function () {
                rt.value = JQen(tt.value, jt.value, true);
            });
        };
    </script>
</body>

</html>
