<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script src="JQen.js"></script>
    <title>JQen wasm example</title>
</head>

<body>
    <div id="maindiv">
        <fieldset>
            <legend>Template:</legend>
            <textarea id="template_txt" cols="50" rows="10"></textarea>
        </fieldset>

        <fieldset>
            <legend>JSON:</legend>
            <textarea id="json_txt" cols="50" rows="10"></textarea>
        </fieldset>
        <br>
        <fieldset>
            <legend>Result:</legend>
            <textarea id="rendered_txt" cols="50" rows="10"></textarea>
        </fieldset>
        <br>
        <br>

        <button id="render">Render Template</button>
    </div>

    <script type='text/javascript'>
        (function () {
            "use strict";
            window.onload = function () {
                document.getElementById("template_txt").value = window.atob('PCEtLS0gVmFyaWFibGVzIC0tPgo8ZGl2Pnt2OnZhcjJ9PC9kaXY+CjxkaXY+e3Y6YWJjW0EtWl19PC9kaXY+CjxkaXY+e3Y6YWJjMVszXX08L2Rpdj4KPGRpdj57djphYmNbQV19PC9kaXY+CjxkaXY+e3Y6bXVsdGlbYXJyMV1bRV1bMF19e3Y6bXVsdGlbYXJyMV1bRV1bMV19PC9kaXY+CjxkaXY+RG9lcyBub3QgZXhpc3Q6IHt2OmFiYzFbMTIzNDU2Nzg5MF19PC9kaXY+CjxkaXY+RW1wdHkgdmFyOiB7djplbXB0eX08L2Rpdj4KPGRpdj57bWF0aDp7djptYXRofX08L2Rpdj4KCjwhLS0tIFNpbXBsZSBpbmxpbmUgY29uZGl0aW9uIC0tPgo8ZGl2PntpaWYgY2FzZT0ie3Y6dmFyMn0gPSAyIiB0cnVlPSIyID09IDIiIGZhbHNlPSIyICE9IDEifTwvZGl2PgoKPCEtLS0gSW5saW5lIGNvbmRpdGlvbiB3aXRoIG9uZSB2YWx1ZSAtLT4KPGRpdj57aWlmIGNhc2U9Int2OnZhcjR9ID0gNCIgdHJ1ZT0iNCA9PSA0In08L2Rpdj4KCjwhLS0tIElubGluZSBjb25kaXRpb24gd2l0aCBhIHJlc3VhbHQgb2YgYSBtYXRoIHZhbHVlIG9mIGEgdmFyaWFibGUgaW4gYW4gQXJyYXkgLS0+CjxkaXY+e2lpZiBjYXNlPSIoe3Y6bnVtYmVyc1syXX0gKyAzKSA9IDUiIHRydWU9ImVxIDUiIGZhbHNlPSIoe3Y6bnVtYmVyc1syXX0gKyAzKSAhPSA1In08L2Rpdj4KCjwhLS0tIElubGluZSBjb25kaXRpb24gd2l0aCBtYXRoIC0tPgo8ZGl2PntpaWYgY2FzZT0iMTQgPT0gMTQiIHRydWU9ImVxIDE0IiBmYWxzZT0iMTQgIT0gMTQifTwvZGl2PgoKPCEtLS0gSWYgY29uZGl0aW9ucyAtLT4KPGRpdj4KICAgIDxpZiBjYXNlPSJ7djp2YXIyfSA9IDIiPgogICAgICAgIDxzcGFuPnt2OnZhcjJ9PC9zcGFuPgogICAgPC9pZj4KCiAgICA8aWYgY2FzZT0ie3Y6dmFyMX0gPSAxIj4KICAgICAgICA8c3Bhbj57djp2YXIxfTwvc3Bhbj4KICAgICAgICA8aWYgY2FzZT0ie3Y6dmFyMn0gPSAyIj4KICAgICAgICAgICAgPHNwYW4+e3Y6dmFyMn08L3NwYW4+CiAgICAgICAgPC9pZj4KICAgIDwvaWY+CgogICAgPGlmIGNhc2U9Int2OnZhcjF9ID0gMTEiPgogICAgICAgIDxzcGFuPnt2OnZhcjF9PC9zcGFuPgogICAgPGVsc2VpZiBjYXNlPSJ7djp2YXIyfSA9IDIyIiAvPgogICAgICAgIDxzcGFuPnt2OnZhcjJ9PC9zcGFuPgogICAgPGVsc2VpZiBjYXNlPSIge3Y6ZW5naW5lfSA9IFFlbnRlbSAiIC8+CiAgICAgICAgPHNwYW4+e3Y6ZW5naW5lfTwvc3Bhbj4KICAgIDwvaWY+CgogICAgPGlmIGNhc2U9Int2OnZhcjF9ID0gMTEiPgogICAgICAgIDxzcGFuPnt2OnZhcjF9PC9zcGFuPgogICAgPGVsc2UgLz4KICAgICAgICA8c3Bhbj57djp2YXI0fTwvc3Bhbj4KICAgIDwvaWY+CjwvZGl2PgoKPCEtLS0gbG9vcHMKICAgICJzZXQiOiBpcyB0aGUgbmFtZSBvZiB0aGUgQXJyYXkgKGNvbGxvY2F0aW9uKS4KICAgICJ2YWx1ZSI6IGZvciB0aGUgdmFsdWUgb2YgdGhlIGN1cnJlbnQgaXRlbS4KICAgICJrZXkiOiBmb3IgdGhlIGlkIG9mIHRoZSBjdXJyZW50IGl0ZW0uIE51bWJlcnMgd2lsbCBiZSB1c2VkIGZvciBvcmRlcmQgaXRlbXMuCi0tPgo8ZGl2PgogICAgPGxvb3Agc2V0PSJhYmMxIiB2YWx1ZT0ibG9vcC0xIiBrZXk9IklEIj4KICAgICAgICA8ZGl2PklEOiBsb29wLTE8L2Rpdj4KICAgIDwvbG9vcD4KCiAgICA8bG9vcCBzZXQ9ImFiYzIiIHZhbHVlPSJsb29wLTIiIGtleT0iSUQyIj4KICAgICAgICA8ZGl2PklEMjogbG9vcC0yPC9kaXY+CiAgICA8L2xvb3A+CjwvZGl2PgoKPCEtLS0gTmVzdGVkIGxvb3BzIC0tPgo8ZGl2PgogICAgPGxvb3Agc2V0PSJtdWx0aVthcnIxXVtFXSIgdmFsdWU9Imxvb3AxIiBrZXk9IklEIj4KICAgICAgICA8c3Bhbj5JRDogbG9vcDE8L3NwYW4+CgogICAgICAgIDxsb29wIHNldD0ibXVsdGlbYXJyMV1bRV0iIHZhbHVlPSJsb29wMiIga2V5PSJJRDIiPgogICAgICAgICAgICA8c3Bhbj5JRDI6IGxvb3AyPC9zcGFuPgogICAgICAgIDwvbG9vcD4KCiAgICAgICAgPGxvb3Agc2V0PSJtdWx0aVthcnIxXVtFXSIgdmFsdWU9Imxvb3AzIiBrZXk9IklEMyI+CiAgICAgICAgICAgIDxzcGFuPklEMzogbG9vcDM8L3NwYW4+CgogICAgICAgIDwvbG9vcD4KCiAgICA8L2xvb3A+CjwvZGl2Pg==');
                document.getElementById("json_txt").value = window.atob('ewogICAgInciOiAiclxcXFwiLAogICAgInZhcjEiOiAiXCIxXCIiLAogICAgIlBQIjogImdnIiwKICAgICJudSI6IG51bGwsCiAgICAiYm9vbCI6IGZhbHNlLAogICAgImJvb2wyIjogdHJ1ZSwKICAgICImJiI6IDEwMDAsCiAgICAidmFyMiI6ICIyIiwKICAgICJ2YXIzIjogIjMiLAogICAgInZhcjQiOiAiNCIsCiAgICAidmFyNSI6ICI1IiwKICAgICJudW0zNCI6IFsKICAgICAgICAiMyIsCiAgICAgICAgIjQiCiAgICBdLAogICAgInZhcl9zdHJpbmciOiAiaW1hZ2UiLAogICAgImVuZ2luZSI6ICJRZW50ZW0iLAogICAgImFiYzEiOiBbCiAgICAgICAgIkIiLAogICAgICAgICJDIiwKICAgICAgICAiRCIsCiAgICAgICAgIkEiCiAgICBdLAogICAgImFiYzIiOiBbCiAgICAgICAgIkUiLAogICAgICAgICJGIiwKICAgICAgICAiQSIKICAgIF0sCiAgICAibnVtYmVycyI6IFsKICAgICAgICAwLAogICAgICAgIDEsCiAgICAgICAgMiwKICAgICAgICAzLAogICAgICAgIDQsCiAgICAgICAgNQogICAgXSwKICAgICJlbXB0eSI6ICIiLAogICAgIm1hdGgiOiAiKCgyKiAoMSAqIDMpKSArIDEgLSA0KSArICgoKDEwIC0gNSkgLSA2ICsgKCgxICsgMSkgKyAoMSArIDEpKSkgKiAoOCAvIDQgKyAxKSkgLSAoMSkgLSAoLTEpICsgMiIsCiAgICAiYWJjIjogewogICAgICAgICJCIjogImIiLAogICAgICAgICJAQCI6IDEwMCwKICAgICAgICAiQSI6ICJhIiwKICAgICAgICAiQyI6ICJjIiwKICAgICAgICAiRCI6ICJkIiwKICAgICAgICAiRSI6IFsKICAgICAgICAgICAgIk8iLAogICAgICAgICAgICAiSyEiCiAgICAgICAgXSwKICAgICAgICAiQS1aIjogIkFCQ0RFRkdISUdLTE1OT0JRUlNULi4uLi4iCiAgICB9LAogICAgIm11bHRpIjogewogICAgICAgICJhcnIxIjogewogICAgICAgICAgICAiRSI6IFsKICAgICAgICAgICAgICAgICJPIiwKICAgICAgICAgICAgICAgICJLISIKICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgImFycjIiOiBbCiAgICAgICAgICAgICJCIiwKICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAiRCIsCiAgICAgICAgICAgICJBIgogICAgICAgIF0sCiAgICAgICAgIkMiOiAiY29vbCIKICAgIH0KfQo=');

                document.getElementById("render").addEventListener('click', function () {
                    var JQen = Module.cwrap('renderTemplate', 'string', ['string', 'string', 'bool']);

                    document.getElementById("rendered_txt").value =
                        JQen(document.getElementById("template_txt").value, document.getElementById("json_txt").value, true);
                });
            };
        }());
    </script>
</body>

</html>
