<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.0, maximum-scale=1.0">
    <title>Qentem Engine Example (WASM)</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <script src="QLib.js"></script>
</head>

<body>
    <div id="maindiv">
        <fieldset>
            <legend>Template:</legend>
            <textarea id="templatetxt" cols="50" rows="10"></textarea>
        </fieldset>

        <fieldset>
            <legend>JSON:</legend>
            <textarea id="jsontxt" cols="50" rows="10"></textarea>
        </fieldset>
        <br>
        <fieldset>
            <legend>Result:</legend>
            <textarea id="renderedtxt" cols="50" rows="10"></textarea>
        </fieldset>
        <br>
        <br>

        <button id="render">Render Template</button>
    </div>

    <script type='text/javascript'>
        (function () {
            "use strict";
            window.onload = function () {
                document.getElementById("templatetxt").value = window.atob('PCEtLS0gVmFyaWFibGVzIC0tPg0KPGRpdj57djp2YXIyfTwvZGl2Pg0KPGRpdj57djphYmNbQS1aXX08L2Rpdj4NCjxkaXY+e3Y6YWJjMVszXX08L2Rpdj4NCjxkaXY+e3Y6YWJjW0FdfTwvZGl2Pg0KPGRpdj57djptdWx0aVthcnIxXVtFXVswXX17djptdWx0aVthcnIxXVtFXVsxXX08L2Rpdj4NCjxkaXY+RG9lcyBub3QgZXhpc3Q6IHt2OmFiYzFbMTIzNDU2Nzg5MF19PC9kaXY+DQo8ZGl2PkVtcHR5IHZhcjoge3Y6ZW1wdHl9PC9kaXY+DQoNCjwhLS0tIFNpbXBsZSBpbmxpbmUgY29uZGl0aW9uIC0tPg0KPGRpdj57aWlmIGNhc2U9Int2OnZhcjJ9ID0gMiIgdHJ1ZT0iMiA9PSAyIiBmYWxzZT0iMiAhPSAxIn08L2Rpdj4NCg0KPCEtLS0gSW5saW5lIGNvbmRpdGlvbiB3aXRoIG9uZSB2YWx1ZSAtLT4NCjxkaXY+e2lpZiBjYXNlPSJ7djp2YXI0fSA9IDQiIHRydWU9IjQgPT0gNCJ9PC9kaXY+DQoNCjwhLS0tIElubGluZSBjb25kaXRpb24gd2l0aCBpbmNyZW1lbnRhbCB2YWx1ZSB0byBhIHZhcmlhYmxlIGluIGFuIEFycmF5IC0tPg0KPGRpdj57aWlmIGNhc2U9Iih7djpudW1iZXJzWzJdfSArIDMpID0gNSIgdHJ1ZT0iZXEgNSIgZmFsc2U9Iih7djpudW1iZXJzWzJdfSArIDMpICE9IDUifTwvZGl2Pg0KDQo8IS0tLSBJbmxpbmUgY29uZGl0aW9uIHdpdGggbWF0aCBvcGVyYXRpb25zIC0tPg0KPGRpdj57aWlmIGNhc2U9Int2Om1hdGh9ID0gMTQiIHRydWU9ImVxIDE0IiBmYWxzZT0ie3Y6bWF0aH0gIT0gMTQifTwvZGl2Pg0KDQo8IS0tLSBJZiBjb25kaXRpb25zIC0tPg0KPGRpdj4NCiAgICA8aWYgY2FzZT0ie3Y6dmFyMn0gPSAyIj4NCiAgICAgICAgPHNwYW4+e3Y6dmFyMn08L3NwYW4+DQogICAgPC9pZj4NCg0KICAgIDxpZiBjYXNlPSJ7djp2YXIxfSA9IDEiPg0KICAgICAgICA8c3Bhbj57djp2YXIxfTwvc3Bhbj4NCiAgICAgICAgPGlmIGNhc2U9Int2OnZhcjJ9ID0gMiI+DQogICAgICAgICAgICA8c3Bhbj57djp2YXIyfTwvc3Bhbj4NCiAgICAgICAgPC9pZj4NCiAgICA8L2lmPg0KDQogICAgPGlmIGNhc2U9Int2OnZhcjF9ID0gMTEiPg0KICAgICAgICA8c3Bhbj57djp2YXIxfTwvc3Bhbj4NCiAgICA8ZWxzZWlmIGNhc2U9Int2OnZhcjJ9ID0gMjIiIC8+DQogICAgICAgIDxzcGFuPnt2OnZhcjJ9PC9zcGFuPg0KICAgIDxlbHNlaWYgY2FzZT0iIHt2OmVuZ2luZX0gPSBRZW50ZW0gIiAvPg0KICAgICAgICA8c3Bhbj57djplbmdpbmV9PC9zcGFuPg0KICAgIDwvaWY+DQoNCiAgICA8aWYgY2FzZT0ie3Y6dmFyMX0gPSAxMSI+DQogICAgICAgIDxzcGFuPnt2OnZhcjF9PC9zcGFuPg0KICAgIDxlbHNlIC8+DQogICAgICAgIDxzcGFuPnt2OnZhcjR9PC9zcGFuPg0KICAgIDwvaWY+DQo8L2Rpdj4NCg0KPCEtLS0gU2luZ2xlIGxvb3BzDQogICAgInNldCI6IGlzIHRoZSBuYW1lICBvZiB0aGUgQXJyYXkgKGNvbGxvY2F0aW9uKS4NCiAgICAidmFyIjogaXMgZm9yIGV2ZXJ5IGl0ZW0gaW4gInNldCIgYW5kIGl0J3MgdmFsdWUuDQotLT4NCjxkaXY+DQogICAgPGxvb3Agc2V0PSJhYmMxIiB2YXI9Imxvb3AtMSI+DQogICAgICAgIDxkaXY+bG9vcC0xKToge3Y6YWJjMVtsb29wLTFdfTwvZGl2Pg0KICAgIDwvbG9vcD4NCg0KICAgIDxsb29wIHNldD0iYWJjMiIgdmFyPSJsb29wLTIiPg0KICAgICAgICA8ZGl2Pmxvb3AtMik6IHt2OmFiYzJbbG9vcC0yXX08L2Rpdj4NCiAgICA8L2xvb3A+DQo8L2Rpdj4NCg0KPCEtLS0gTmVzdGVkIGxvb3BzIC0tPg0KPGRpdj4NCiAgICA8bG9vcCBzZXQ9Im11bHRpW2FycjFdW0VdIiB2YXI9Imxvb3AxIj4NCiAgICAgICAgPHNwYW4+bG9vcC1sb29wMSk6IHt2Om11bHRpW2FycjFdW0VdW2xvb3AxXX08L3NwYW4+DQoNCiAgICAgICAgPGxvb3Agc2V0PSJtdWx0aVthcnIxXVtFXSIgdmFyPSJsb29wMiI+DQogICAgICAgICAgICA8c3Bhbj5sb29wLWxvb3AyKToge3Y6bXVsdGlbYXJyMV1bRV1bbG9vcDJdfTwvc3Bhbj4NCiAgICAgICAgPC9sb29wPg0KDQogICAgICAgIDxsb29wIHNldD0ibXVsdGlbYXJyMV1bRV0iIHZhcj0ibG9vcDMiPg0KICAgICAgICAgICAgPHNwYW4+bG9vcC1sb29wMyk6IHt2Om11bHRpW2FycjFdW0VdW2xvb3AzXX08L3NwYW4+DQoNCiAgICAgICAgPC9sb29wPg0KDQogICAgPC9sb29wPg0KPC9kaXY+DQo=');
                document.getElementById("jsontxt").value = window.atob('LyoKIEMgc3R5bGUgY29tbWVudHMKKi8KCi8vIEMgc3R5bGUgY29tbWVudHMKCnsKICAgICJ2YXIxIjogIlwiMVwiIiwKICAgIC8vICJQUCI6ICJnZyIsIGNvbW1lbnQKICAgICJudSI6IG51bGwsCiAgICAiYm9vbCI6IGZhbHNlLAogICAgImJvb2wyIjogdHJ1ZSwKICAgICImJiI6IDEwMDAsCiAgICAidmFyMiI6ICIyIiwKICAgICJ2YXIzIjogIjMiLCAvLyBjb21tZW50CiAgICAidmFyNCI6ICI0IiwKICAgICJ2YXI1IjogIjUiLAogICAgIm51bTM0IjogWwogICAgICAgICIzIiwKICAgICAgICAiNCIKICAgIF0sCiAvKiAgICJ2YXJfc3RyaW5nIjogImltYWdlIiwKY29tbWVudAoKKi8KICAgICJlbmdpbmUiOiAiUWVudGVtIiwgCiAgICAiYWJjMSI6IFsKICAgICAgICAiQiIsCiAgICAgICAgIkMiLCAvLyBjb21tZW50CiAgICAgICAgIkQiLAogICAgICAgICJBIgogICAgXSwKICAgICJhYmMyIjogWwogICAgICAgICJFIiwKICAgICAgICAiRiIsCiAgICAgICAgIkEiCiAgICBdLAogICAgIm51bWJlcnMiOiBbCiAgICAgICAgMCwKICAgICAgICAxLAogICAgICAgIDIsCiAgICAgICAgMywKICAgICAgICA0LAogICAgICAgIDUKICAgIF0sCiAgICAiZW1wdHkiOiAiIiwKICAgICJtYXRoIjogIigoMiogKDEgKiAzKSkgKyAxIC0gNCkgKyAoKCgxMCAtIDUpIC0gNiArICgoMSArIDEpICsgKDEgKyAxKSkpICogKDggLyA0ICsgMSkpIC0gKDEpIC0gKC0xKSArIDIiLAogICAgImFiYyI6IHsKICAgICAgICAiQiI6ICJiIiwKICAgICAgICAiQEAiOiAxMDAsCiAgICAgICAgIkEiOiAiYSIsCiAgICAgICAgIkMiOiAiYyIsCiAgICAgICAgIkQiOiAiZCIsCiAgICAgICAgIkUiOiBbCiAgICAgICAgICAgICJPIiwKICAgICAgICAgICAgIkshIgogICAgICAgIF0sCiAgICAgICAgIkEtWiI6ICJBQkNERUZHSElHS0xNTk9CUVJTVC4uLi4uIgogICAgfSwKICAgICJtdWx0aSI6IHsKICAgICAgICAiYXJyMSI6IHsKICAgICAgICAgICAgIkUiOiBbCiAgICAgICAgICAgICAgICAiTyIsCiAgICAgICAgICAgICAgICAiSyEiCiAgICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgICJhcnIyIjogWwogICAgICAgICAgICAiQiIsCiAgICAgICAgICAgICJDIiwKICAgICAgICAgICAgIkQiLAogICAgICAgICAgICAiQSIKICAgICAgICBdLAogICAgICAgICJDIjogImNvb2wiCiAgICB9Cn0K');

                document.getElementById("render").addEventListener('click', function () {
                    var qEngine = Module.cwrap('renderTemplate', 'string', ['string', 'string', 'bool']);

                    document.getElementById("renderedtxt").value =
                        qEngine(document.getElementById("templatetxt").value, document.getElementById("jsontxt").value, true);
                });
            };
        }());
    </script>
</body>

</html>
